<header>
  <h1><%= @category.name.capitalize %></h1>
</header>

<p><a href="./<%= @category.id %>/edit">Edit category</a></p>

<table>
  <tr>
    <th>id</th>
    <th>Date</th>
    <th>Merchant</th>
    <th>Category</th>
    <th>Amount</th>
  </tr>
  <% for transaction in @transactions %>
    <% if transaction.category_id == @category.id %>
      <tr>
        <td><a href="../transactions/<%= transaction.id %>"><%= transaction.id %></a></td>
        <td><%= transaction.transaction_date %></td>
        <td><%= transaction.merchant.name %></td>
        <td><%= transaction.category.name.capitalize %></td>
        <td><%= transaction.pretty_value %></td>
      </tr>
    <% end %>
  <% end %>
  <tfoot>
    <td colspan="4" class="empty"></td>
    <td class="sum">
      <% pounds = 0 %>
      <% pence = 0 %>
      <% @transactions.each do |transaction| %>
        <% if transaction.category_id == @category.id %>
          <% pounds += transaction.pounds %>
          <% pence += transaction.pence %>
        <% end %>
      <% end %>
      <% pounds += pence / 100 %>
      <% pence %= 100 %>
      <%= pence < 10 ? "£#{pounds}.0#{pence}" : "£#{pounds}.#{pence}" %>
    </td>
  </tfoot>
</table>
</div>
